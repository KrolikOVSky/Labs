# Gradeo

Система электронного оценивания и документооборота

## Разработка

### Что необходимо установить для разработки
1. Java Development Kit. Разные JDK находятся [здесь](https://jdk.dev/download/).
2. Intellij IDEA Community Edition(или Ultimate, если вы ее купите). Брать [тут](https://www.jetbrains.com/idea/download/#section=windows).
3. СУБД PostgreSQL. Скачать можно [здесь](https://www.postgresql.org/download/).
4. Систему контроля версий Git. Скачать можно [тут](https://git-scm.com/downloads).
5. Систему контейнеризации Docker. [Ссылка](https://www.docker.com/).

Для IntelliJ заходим в `File->Settings->Plugins` и скачиваем плагин `Lombok`.

Также, если вам трудно работать с git с консоли, рекомендую скачать SourceTree([ссылка](https://www.sourcetreeapp.com/)), графический клиент для гита.

### Скачивание проекта на локальный компьютер для разработки
Для этого необходимо выполнить команду:
```bash
git clone https://gitlab.com/gradeo/gradeo.git
```

Если у вас настроен SSH-доступ, можно выполнить другую команду:
```bash
git clone git@gitlab.com:gradeo/gradeo.git
```
### Структура проекта
В проекте, как можно увидеть, несколько папок.
1. Папка `.git` - здесь хранится история git и его настройки
2. Папка `app` - Gradle-проект самого приложения Gradeo
3. Папка `autotests` - Gradle-проект автотестов
4. Файл `README.md` - этот файл вы читаете сейчас
5. Файл `LICENSE` - файл лицензии GPLv3
6. Файл `.gitlab-ci.yml` - конфигурация для Continuous Integration/Continuous Delivery (CI/CD)

### Настройка проекта
Для настройки проекта необходимо зайти в папку `app\src\main\resources` и скопировать файл `application-default.yml.template`, назвать новый файл
как `application-default.yml`. В данном файле нужно указать ваши настройки для подключения к локальной БД.

Указанные вами локальные настройки не будут трекаться с помощью git.

В целом у нас будут дополнительные  `application-*.yml` файлы, которые будут хранить настройки для Staging и Production-серверов.
Подробнее с механизмом профилей можно почитать на [Spring Profiles](https://www.baeldung.com/spring-profiles).

### Запуск проекта
Первоначальный запуск проекта:
1. Заходим в `View->Tool Windows->Gradle`. 
2. В появившемся окне нажимаем `Tasks->application->bootRun`.
3. Переходим в браузере по адресу localhost:8080.

Последующие запуски выполняются как обычно через `Run->run 'app[bootRun]'` (Shift+F10)

### Процесс разработки
Правила:
1. Напрямую в master никогда не коммитим, а создаем merge requests.
2. Код должен быть верифицирован(approved) как минимум 2-мя другими людьми.
3. Код должен пройти процесс Continuous Integration без ошибок.
4. Код бизнес-логики должен быть покрыт тестами.

Процесс разработки состоит из следующих шагов:
1. Посмотреть доступные задачи. Список задач находится на странице [Issues](https://gitlab.com/gradeo/gradeo/issues) или на [Kanban доске](https://gitlab.com/gradeo/gradeo/-/boards). Рекомендуется использовать доску.
2. Выбрать задачу, у которой еще нет исполнителя и которая находится в статусе(столбец на доске) `Ready for Dev`.
3. Задать исполнителя задачи путем указания себя в поле `Assignee` задачи.
4. Нажать на кнопку `Create Merge request`, потом выбрать `Create branch and merge request`, также указать хорошее название ветки (какое вам нравится).
5. С помощью `git fetch` обновляем доступную информацию о `remote branches`.
6. С помощью `git checkout <имя ветки>` создаем новую локальную ветку для нашей задачи, которую потом сможем отправить на сервер.
7. Открываем IntelliJ IDEA и делаем задачу. Не забываем делать `git commit`.
8. После завершения разработки коммитим все и делаем `git push origin <имя ветки>`.
9. В Gitlab на странице вашего Merge Requests должны появиться ваши изменения.
10. Как только закончите разработку, нужно нажать "Resolve WIP Status".
11. Коллеги должны сделать вам Code Review и поставить не менее двух Approve. Могут быть замечания к коду и предложения его улучшить, сделайте это.
12. Continuous Integration Pipelines должны пройти без ошибок (все галочки должны быть).
13. Как только все ок и все работает, можно нажать кнопку Merge. Соответствующая задача закроется автоматически.

План и временные рамки выполнения работ находятся в [docs/RELEASE_CALENDAR.md](https://gitlab.com/gradeo/gradeo/blob/master/docs/RELEASE_CALENDAR.md).

## Автотестирование
Будет добавлено позже

## Развертывание и Continuous Delivery
Будет добавлено позже

